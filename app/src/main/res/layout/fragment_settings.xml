<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    tools:context=".ui.settings.SettingsFragment">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="16dp">

        <!-- Nota: El botón de restablecer se movió al final como una opción separada -->

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Ajustes"
            android:textSize="24sp"
            android:textStyle="bold"
            android:textColor="?attr/colorOnSurface"
            android:layout_marginBottom="0dp"
            android:gravity="center"
            android:visibility="gone" />

        <!-- Voice Commands Settings -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/voiceCommandsCard"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            app:cardCornerRadius="8dp"
            app:cardElevation="2dp"
            android:clickable="true"
            android:focusable="true"
            android:foreground="@android:color/transparent">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:padding="16dp"
                android:gravity="center_vertical">

                <TextView
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:text="🎤"
                    android:textSize="24sp"
                    android:gravity="center"
                    android:background="@android:color/holo_blue_light"
                    android:layout_marginEnd="16dp" />

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Comandos de Voz"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Configurar reconocimiento de voz"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                </LinearLayout>

                <com.google.android.material.switchmaterial.SwitchMaterial
                    android:id="@+id/voiceAutoSaveSwitch"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Auto-guardar"
                    android:textSize="12sp" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text=">"
                    android:textSize="18sp"
                    android:textColor="?attr/colorOnSurface"
                    android:layout_gravity="center_vertical" />

            </LinearLayout>

            <!-- Divider -->
            <View
                android:layout_width="match_parent"
                android:layout_height="1dp"
                android:background="?attr/colorOnSurface" />

            <!-- Auto-save delay row (legacy inline) -->
        </com.google.android.material.card.MaterialCardView>

        <!-- Budget Alerts -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/budgetAlertsCard"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            app:cardCornerRadius="8dp"
            app:cardElevation="2dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:padding="16dp"
                android:gravity="center_vertical">

                <TextView
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:text="🔔"
                    android:textSize="24sp"
                    android:gravity="center"
                    android:background="@android:color/holo_blue_light"
                    android:layout_marginEnd="16dp" />

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Alertas de presupuesto"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Sonido y notificación al exceder el diario"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                </LinearLayout>

                <com.google.android.material.switchmaterial.SwitchMaterial
                    android:id="@+id/budgetAlertsSwitch"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            </LinearLayout>

        </com.google.android.material.card.MaterialCardView>


        <!-- Voice Max Listen Timeout -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/voiceMaxListenCard"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            app:cardCornerRadius="8dp"
            app:cardElevation="2dp">

            <LinearLayout
                android:id="@+id/voiceMaxListenLayout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:padding="16dp"
                android:gravity="center_vertical"
                android:clickable="true"
                android:focusable="true">

                <TextView
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:text="⌛"
                    android:textSize="24sp"
                    android:gravity="center"
                    android:background="@android:color/holo_blue_light"
                    android:layout_marginEnd="16dp" />

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Tiempo máx. de escucha"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:id="@+id/voiceMaxListenValue"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="8.0 s"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                </LinearLayout>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text=">"
                    android:textSize="18sp"
                    android:textColor="?attr/colorOnSurface"
                    android:layout_gravity="center_vertical" />

            </LinearLayout>

        </com.google.android.material.card.MaterialCardView>

        <!-- Global Voice Quick Add (Accessibility) -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/globalVoiceCard"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            app:cardCornerRadius="8dp"
            app:cardElevation="2dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:padding="16dp"
                    android:gravity="center_vertical">

                    <TextView
                        android:layout_width="48dp"
                        android:layout_height="48dp"
                        android:text="🔊"
                        android:textSize="24sp"
                        android:gravity="center"
                        android:background="@android:color/holo_blue_light"
                        android:layout_marginEnd="16dp" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical">

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Detección global (Accesibilidad)"
                            android:textSize="16sp"
                            android:textStyle="bold"
                            android:textColor="?attr/colorOnSurface" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Permite activar con botones de volumen en cualquier pantalla"
                            android:textSize="14sp"
                            android:textColor="?attr/colorOnSurface" />

                    </LinearLayout>

                    <com.google.android.material.switchmaterial.SwitchMaterial
                        android:id="@+id/voiceGlobalEnableSwitch"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />

                </LinearLayout>

                <View
                    android:layout_width="match_parent"
                    android:layout_height="1dp"
                    android:background="?attr/colorOnSurface" />

                <!-- Press count row -->
                <LinearLayout
                    android:id="@+id/voiceGlobalPressCountLayout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:padding="16dp"
                    android:gravity="center_vertical"
                    android:clickable="true"
                    android:focusable="true">

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Pulsaciones"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:id="@+id/voiceGlobalPressCountValue"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Triple"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                </LinearLayout>

                <!-- Window row -->
                <LinearLayout
                    android:id="@+id/voiceGlobalWindowLayout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:padding="16dp"
                    android:gravity="center_vertical"
                    android:clickable="true"
                    android:focusable="true">

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Ventana de detección"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:id="@+id/voiceGlobalWindowValue"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="500 ms"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                </LinearLayout>

                <!-- Key mode row (Up / Down / Both) -->
                <LinearLayout
                    android:id="@+id/voiceGlobalKeyModeLayout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:padding="16dp"
                    android:gravity="center_vertical"
                    android:clickable="true"
                    android:focusable="true">

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Tecla de volumen"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:id="@+id/voiceGlobalKeyModeValue"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Ambos"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                </LinearLayout>

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:padding="16dp"
                    android:text="Nota: debe habilitar Kolki en Ajustes > Accesibilidad para permitir la detección global."
                    android:textSize="12sp"
                    android:textColor="?attr/colorOnSurface" />

            </LinearLayout>

        </com.google.android.material.card.MaterialCardView>

        <!-- Voice Auto-Save Delay (separate card) -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/voiceAutoSaveDelayCard"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            app:cardCornerRadius="8dp"
            app:cardElevation="2dp">

            <LinearLayout
                android:id="@+id/voiceAutoSaveDelayLayout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:padding="16dp"
                android:gravity="center_vertical"
                android:clickable="true"
                android:focusable="true">

                <TextView
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:text="⏱️"
                    android:textSize="24sp"
                    android:gravity="center"
                    android:background="@android:color/holo_blue_light"
                    android:layout_marginEnd="16dp" />

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Espera de auto-guardado"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:id="@+id/voiceAutoSaveDelayValue"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="0.8 s"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                </LinearLayout>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text=">"
                    android:textSize="18sp"
                    android:textColor="?attr/colorOnSurface"
                    android:layout_gravity="center_vertical" />

            </LinearLayout>

        </com.google.android.material.card.MaterialCardView>

        <!-- App Settings -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/appSettingsCard"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            app:cardCornerRadius="8dp"
            app:cardElevation="2dp"
            android:clickable="true"
            android:focusable="true"
            android:foreground="@android:color/transparent">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="48dp"
                        android:layout_height="48dp"
                        android:text="⚙️"
                        android:textSize="24sp"
                        android:gravity="center"
                        android:background="@android:color/holo_blue_light"
                        android:layout_marginEnd="16dp" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical">

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Configuración General"
                            android:textSize="16sp"
                            android:textStyle="bold"
                            android:textColor="?attr/colorOnSurface" />

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Moneda y exportación"
                            android:textSize="14sp"
                            android:textColor="?attr/colorOnSurface" />

                    </LinearLayout>

                </LinearLayout>

                <View
                    android:layout_width="match_parent"
                    android:layout_height="1dp"
                    android:background="?attr/colorOnSurface" />

                <!-- Export data row -->
                <LinearLayout
                    android:id="@+id/exportDataLayout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:padding="16dp"
                    android:gravity="center_vertical"
                    android:clickable="true"
                    android:focusable="true">

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Exportar datos"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:id="@+id/exportDataHint"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="JSON"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />
                </LinearLayout>

                <!-- Currency selector row -->
                <LinearLayout
                    android:id="@+id/currencySelectorLayout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:padding="16dp"
                    android:gravity="center_vertical"
                    android:clickable="true"
                    android:focusable="true">

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Moneda"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:id="@+id/currencyValue"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="S/"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />
                </LinearLayout>

                <!-- Export format selector row -->
                <LinearLayout
                    android:id="@+id/exportFormatLayout"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:padding="16dp"
                    android:gravity="center_vertical"
                    android:clickable="true"
                    android:focusable="true">

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Formato de exportación"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:id="@+id/exportFormatValue"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="CSV"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />
                </LinearLayout>

            </LinearLayout>

        </com.google.android.material.card.MaterialCardView>

        <!-- About -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/aboutCard"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            app:cardCornerRadius="8dp"
            app:cardElevation="2dp"
            android:clickable="true"
            android:focusable="true"
            android:foreground="@android:color/transparent">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:padding="16dp">

                <TextView
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:text="ℹ️"
                    android:textSize="24sp"
                    android:gravity="center"
                    android:background="@android:color/holo_blue_light"
                    android:layout_marginEnd="16dp" />

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Acerca de Kolki"
                        android:textSize="16sp"
                        android:textStyle="bold"
                        android:textColor="?attr/colorOnSurface" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Versión 1.0 - Rastreador de gastos"
                        android:textSize="14sp"
                        android:textColor="?attr/colorOnSurface" />

                </LinearLayout>

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text=">"
                    android:textSize="18sp"
                    android:textColor="?attr/colorOnSurface"
                    android:layout_gravity="center_vertical" />

            </LinearLayout>

        </com.google.android.material.card.MaterialCardView>

        <!-- Reset Defaults (bottom option) -->
        <com.google.android.material.card.MaterialCardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="16dp"
            app:cardCornerRadius="8dp"
            app:cardElevation="2dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:padding="16dp">

                <TextView
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Restablecer a valores predeterminados"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    android:textColor="?attr/colorOnSurface" />

                <com.google.android.material.button.MaterialButton
                    android:id="@+id/resetDefaultsButton"
                    style="@style/Widget.MaterialComponents.Button.OutlinedButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Restablecer"
                    android:drawableStart="@android:drawable/ic_menu_revert"
                    android:drawablePadding="8dp" />

            </LinearLayout>

        </com.google.android.material.card.MaterialCardView>

    </LinearLayout>

</ScrollView>
